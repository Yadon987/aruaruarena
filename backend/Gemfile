# frozen_string_literal: true

source 'https://rubygems.org'
git_source(:github) { |repo| "https://github.com/#{repo}.git" }

# =============================================================================
# Core
# =============================================================================
# Use specific railties instead of full "rails" to avoid ActiveRecord dependency issues
# gem "rails", "~> 8.0.0"
gem 'actionpack', '~> 8.0.0'
gem 'actionview', '~> 8.0.0'
gem 'activejob', '~> 8.0.0'
gem 'activemodel', '~> 8.0.0'
gem 'bootsnap', require: false
gem 'puma', '>= 5.0'
gem 'railties', '~> 8.0.0'

# =============================================================================
# API & Network
# =============================================================================
gem 'faraday'
gem 'parallel'
gem 'concurrent-ruby', '~> 1.0'
gem 'rack-cors'

# =============================================================================
# Database (DynamoDB)
# =============================================================================
gem 'aws-sdk-dynamodb'
gem 'dynamoid', '~> 3.11'

# =============================================================================
# Image Processing
# =============================================================================
gem 'mini_magick'

# =============================================================================
# Utilities
# =============================================================================
gem 'tzinfo-data', platforms: %i[windows jruby]

# =============================================================================
# Development & Test
# =============================================================================
group :development, :test do
  # Debugging
  gem 'debug', platforms: %i[mri windows]
  gem 'pry-rails'

  # Testing Framework
  gem 'faker'
  gem 'rspec-rails', '~> 8.0' # Updated to match root version

  # Code Quality
  gem 'brakeman', require: false
  gem 'rubocop-rails', require: false

  # Environment
  gem 'dotenv-rails'
end

# =============================================================================
# Test Only
# =============================================================================
group :test do
  # Coverage
  gem 'simplecov', require: false

  # Test Fixtures
  gem 'factory_bot'

  # Matchers & Mocks
  gem 'shoulda-matchers'
  gem 'vcr'
  gem 'webmock'

  # CI Integration
  gem 'rspec_junit_formatter', '~> 0.6'
end

# =============================================================================
# Lambda
# =============================================================================
gem 'aws_lambda_ric'
gem 'lamby'
